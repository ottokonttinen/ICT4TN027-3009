# h5 Final Countdown

#### x) Lue ja tiivistä (Tässä x-alakohdassa ei tarvitse tehdä testejä tietokoneella, vain lukeminen tai kuunteleminen ja tiivistelmä riittää. Tiivistämiseen riittää muutama ranskalainen viiva.)  
+ Karvinen 2022: [Cracking Passwords with Hashcat](https://terokarvinen.com/2022/cracking-passwords-with-hashcat/)

Hashcat on lähdekoodin salasanojen murtamiseen tarkoitettu ohjelma. Hash on salasanan tiiviste, jollaisena ne tallennetaan tietokoneille. Tiivistefunktion tulokset ovat yksisuuntaisia, eli niitä ei voi muuttaa takaisin salasanoiksi, mutta tietokone voi yrittää kokeilla vastaavatko tietyt sanat tiivisteitä. Ohjelman täytyy ensiksi tietää minkä tyyppinen tiiviste on kyseessä komennolla 'hashid'.

Komento salasanan murtamiseksi voi näyttää esimerksiksi tältä: `hashcat -m 0 '6b1628b016dff46e6fa35684be6acc96' rockyou.txt -o solved`. Parametri "-m 0" määrittää hash-tyypin. Sen jälkeen tulee itse hash pitkänä merkkijonona ja käytetty sanakirja, joka sisältää yleisiä salasanoja. Viimeinen parametri tallentaa löydetyn salasanan tiedostoon nimeltä "solved". Ohjelma siis yrittää murtaa annetun hashin käyttäen rockyou.txt-sanakirjaa.

+ Karvinen 2023: [Crack File Password With John](https://terokarvinen.com/2023/crack-file-password-with-john/)

John the Ripper -ohjelma pystyy murtamaan salasanoja sanakirjahyökkäyksellä useissa tiedostomuodoissa, jotka tukevat salauksen käyttöä salasanalla. John the Ripperin täysin ilmaisen Jumbo-version lähdekoodin voi ladata Githubista, mutta se on käännettävä itse. Tiedoston salasanan murtamiseksi on ensiksi eroteltava sen tiivistefunktio. Sen jälkenen voidaan käyttä sanakirjaa tiivisteen murtamiseen.   

+ Karvinen 2023: [Find Hidden Web Directories - Fuzz URLs with ffuf](https://terokarvinen.com/2023/fuzz-urls-find-hidden-directories/)

Fuff on monipuolinen fuzzing-työkalu, jolla voi löytää piilotettuja hakemistoja web-palvelimilta. Ohjelma tarvitsee sanakirjan, joka sisältää yleisiä web-polkuja. Valmiita sanakirjoja voi ladata internetistä. 

Ohjelmaa voidaan ajaa esimerkiksi komennolla: `/ffuf -w sanakirja.txt -u http://127.0.0.2:8000/FUZZ`. Sanakirja.txt sisältää mahdollisia web-polkuja. Valitsin `-w` kertoo käytettävän sanakirjan sijainnin ja `-u` kertoo URL-osoitteen, jonka lopussa olevaa "FUZZ" -merkkijonoa korvataan jokaisella sanakirjan termillä.

#### y) The SUPER ultimate Hakk3r Che33tsheet 0.0.1. Tee tiivistelmä omista ja kavereiden parhaista tunketumistekniikoista. Ole täsmällinen, liitä komennot mukaan. Tämän kohdan vastaus lienee pidempi kuin aiempien x-tehtävien. Viittaa lähteisiin. Tässä alakohdassa ei tarvitse ajaa komentoja tietokoneella.

Tässä on tiivistelmä parhaista tunkeutumistestauksen tekniikoista, joihin on tutustuttu [Tunkeutumistestaus 2023 kevät](https://terokarvinen.com/2023/tunkeutumistestaus-2023-kevat/) -kurssilla. 

1. Porttiskannaus: Tekniikka käyttää erilaisia ohjelmistoja, kuten Nmap, löytääkseen avoinna olevat portit tietokoneessa. Porttiskannaus voi auttaa löytämään järjestelmässä mahdollisesti haavoittuvia kohtia.
    + Esimerkki komennosta: `nmap -p- <osoite>` skannaa kaikki portit.
    + 
2. Haavoittuvuuksien skannaus: Metasploit Framework sisältää laajan valikoiman moduuleita ja hyökkäyksiä, jotka auttavat tunkeutumaan järjestelmiin ja tietoverkkoihin. Sitä voidaan käyttää esimerkiksi haavoittuvuuksien skannaamiseen, hyökkäysten toteuttamiseen, salasanojen murtamiseen ja takaovien asentamiseen.   
3. Salasanan murtaminen: Tämä tekniikka käyttää ohjelmia, kuten John the Ripper, murtamaan salasanat järjestelmään pääsemiseksi.
    + Esimerkki komennosta: `john --wordlist=<sanalista> <tiiviste>` aloittaa salasanan murtamisen.
    + 
5. Verkkoliikenteen kaappaaminen on menetelmä, jossa pyritään sieppaamaan tietoliikenne järjestelmän tai sovelluksen sisällä. Tähän voidaan käyttää työkaluja kuten Wireshark ja ZAP-välimiesproxy.
    + a
    +
7. SQL-injektio: Tämä tekniikka hyödyntää tietokannan heikkouksia injektoimalla SQL-komentoja verkkosivun lomakkeisiin tai URL-osoitteisiin, jolloin hyökkääjä voi saada tietoja tietokannasta tai jopa hallita sitä.
    + Esimerkki: `http://example.com/search.php?id=<SQL-injektio>`.
    +
8. Sosiaalinen manipulointi:       



#### a) Asenna Hashcat ja testaa sen toiminta murtamalla esimerkkisalasana.

`sudo apt update`  
`sudo apt upgrade`  
`sudo apt install hashid hashcat wget`  
`hashid -m 6b1628b016dff46e6fa35684be6acc96`  
`wget https://github.com/danielmiessler/SecLists/raw/master/Passwords/Leaked-Databases/rockyou.txt.tar.gz`  
`tar xf rockyou.txt.tar.gz`  
`hashid -m 6b1628b016dff46e6fa35684be6acc96`  
`hashcat -m 0 '6b1628b016dff46e6fa35684be6acc96' rockyou.txt -o solved`


![kuva](https://github.com/ottokonttinen/ICT4TN027-3009/assets/103586741/9d34bfd4-1d09-4eb3-8dc9-48b28b87fc42)

`echo -n "salasana" | md5sum `
```
┌──(kali㉿kali)-[~/hashed]
└─$ cat solved   
6b1628b016dff46e6fa35684be6acc96:summer
e7e941b1f09f266540c6780db51d5f58:salasana
```

#### b) Salainen, mutta ei multa. Ratkaise dirfuzt-1 artikkelista Karvinen 2023: [Find Hidden Web Directories - Fuzz URLs with ffuf](https://terokarvinen.com/2023/fuzz-urls-find-hidden-directories/)

Tein kansion ladattaville tiedostoille `mkdir fuff`. 

Latasin kansioon harjoitusmaalin komennoilla:  
`wget https://terokarvinen.com/2023/fuzz-urls-find-hidden-directories/dirfuzt-1`  
`chmod u+x dirfuzt-1`  
Käynnistin maalin `./dirfuzt-1`-komennolla ja avasin sivuston selaimeen osoitteesta `http://127.0.0.2:8000`.

Seuraavaksi asennan ffuf-ohjelman uudella terminaalilla, koska edellinen ajaa harjoitusmaalia.  
`wget https://github.com/ffuf/ffuf/releases/download/v2.0.0/ffuf_2.0.0_linux_amd64.tar.gz`  
`tar -xf ffuf_2.0.0_linux_amd64.tar.gz`

Lataan vielä sanakirjan yleisimmistä poluista.  
`wget https://raw.githubusercontent.com/danielmiessler/SecLists/master/Discovery/Web-Content/common.txt`

Tämän jälkeen pääsen ratkaisemaan itse tehtävää, jossa on tarkoitus löytää piilotettu kansio web-palvelimelta. Kokeilin aluksi toimisiko sattumalta sama ratkaisu, kuin artikkelin esimerkkitehtävässä, jossa käytettiin maalia `dirfuzt-0`
`./ffuf -w common.txt -u http://127.0.0.2:8000/FUZZ -fs 132`
Komento kuitenkin syötti noin 5000 tuhatta riviä, joten oli järkevää käyttää erilaista suodatusta. 

Kokeilin seuraavaksi käyttää komennossa parametria `-fc 200`, joka suodattaa näkyviin sivut HTTP-statuskoodin mukaan. Statuskoodi 200 tarkoittaa, että pyyntö onnistuu ja palvelin lähettää pyydetyn sisällön.  
`./ffuf -w common.txt -u http://127.0.0.2:8000/FUZZ -fc 200`  
![kuva](https://github.com/ottokonttinen/ICT4TN027-3009/assets/103586741/d2730126-d768-4f87-b868-fbe83efd828f)


####  c) Asenna John the Ripper ja testaa sen toiminta murtamalla jonkin esimerkkitiedoston salasana.



####  d) Jurpon sivut. Ohhoh, sieppasit juuri Jurpon Windowsista NTLM-tiivisteen 83f1cf89225005caeb4e52c9ea9b00e0 . Liitteenä Jurpon kotisivulta leikattu ja liimattu teksti. Tee oma hyökkäyssanakirja ja murra tiiviste myöhempää liikkumista (lateral movement) varten.



####  e) Valitse 2: Ratkaise kaksi itse valitsemaasi tehtävää [PortSwigger labs](https://portswigger.net/web-security/all-labs) -sivulta. Tietysti sellaisia, jotka eivät ole olleet vielä läksynä.



#### Liite: Jurpon kotisivu
```
Jurpon kotisivu

MasterLazerMan on suosikkisankarini. Olen aika komea, koska harrastan thriatlonin lisäksi Foo Man Zhu -perinnepainia. Olen kotoisin Kouvolasta, jonka arkkitehtuuri saa sydämmeni sykkiimään vikkelämmin. 

Nähdään IRCissä, sähköpostissa tai DeepThinked-piilopalvelussa TORissa.
```

